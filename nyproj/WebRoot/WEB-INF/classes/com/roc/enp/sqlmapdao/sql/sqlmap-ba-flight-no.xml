<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="baFlightNo">
 	<resultMap class="com.roc.enp.entity.BaFlightNo" id="ooFlightNo">
	  <result property="id" column="id"/>
	  <result property="flightId" column="flight_id"/>	
	  <result property="flightNo" column="flight_no"/>	
	  <result property="flightDate" column="flight_date"/>
	  <result property="flyTime" column="fly_time"/>
	  <result property="flightName" column="flight_name"/>
    </resultMap>
	<select id="validateIsGenFlightNo" resultClass="com.roc.enp.entity.BaFlightNo">
    	select id,flight_id,flight_no,flight_date,fly_time,flight_name from ba_flight_no
    	where flight_no=#flightNo# and flight_date=#flightDate# and fly_time=#flyTime#
    </select>
    <select id="queryFlightInfoByDateAndFlightNo" resultClass="com.roc.enp.entity.BaFlightNo">
    	select id,flight_id,flight_no,flight_date,fly_time,flight_name from ba_flight_no
    	where flight_no=#flightNo# and flight_date=#flightDate#
    </select>
    <insert id="insertBaFlightNo" parameterClass="com.roc.enp.entity.BaFlightNo">
        insert into ba_flight_no (flight_id,flight_no,flight_date,fly_time)
         values(#flightId#,#flightNo#,#flightDate#,#flyTime#)
        <selectKey resultClass="java.lang.Integer" keyProperty="id">     
        	SELECT LAST_INSERT_ID()
        </selectKey>   
    </insert>
</sqlMap>